local _file = "teleportPos.txt"
local _gui = game:GetService("StarterGui")
local _input = game:GetService("UserInputService")
local _players = game:GetService("Players")

local function _notify(_title, _text, _dur)
    _gui:SetCore("SendNotification", {
        Title = _title,
        Text = _text,
        Duration = _dur or 3
    })
end

local function _getRoot()
    local _player = _players.LocalPlayer
    return _player.Character and _player.Character:FindFirstChild("HumanoidRootPart")
end

local function _save(_force)
    if isfile(_file) and not _force then
        _notify("üìç Coordenada j√° salva!", "Use SHIFT+G para sobrescrever.", 4)
        return
    end
    
    local _root = _getRoot()
    if _root then
        local _pos = _root.Position
        writefile(_file, _pos.X .. "," .. _pos.Y .. "," .. _pos.Z)
        _notify("‚úÖ Sucesso!", "Posi√ß√£o salva com sucesso.", 3)
    end
end

local function _teleport()
    if not isfile(_file) then
        _notify("‚ö†Ô∏è Erro", "Nenhuma coordenada salva encontrada!", 3)
        return
    end
    
    local _coords = readfile(_file)
    local x, y, z = _coords:match("([^,]+),([^,]+),([^,]+)")
    
    if not (x and y and z) then
        _notify("‚ö†Ô∏è Erro", "Arquivo de coordenadas inv√°lido!", 3)
        return
    end
    
    local _root = _getRoot()
    if _root then
        _root.CFrame = CFrame.new(tonumber(x), tonumber(y), tonumber(z))
        _notify("üöÄ Teleporte", "X=" .. x .. " | Y=" .. y .. " | Z=" .. z, 4)
    end
end

_input.InputBegan:Connect(function(input, processed)
    if processed then return end
    
    local _key = input.KeyCode
    local _shift = _input:IsKeyDown(Enum.KeyCode.LeftShift)
    
    if _key == Enum.KeyCode.G then
        _save(_shift)
    elseif _key == Enum.KeyCode.H then
        _teleport()
    end
end)

_notify("üìå Controles", "G = Salvar | SHIFT+G = Sobrescrever | H = Teleportar", 6)
